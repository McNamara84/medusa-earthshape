<%= paginate @records %>
<table>
  <thead>
    <%= search_form_for @search, url: records_path do |f| %>
    <tr>
      <th>
        <%= f.button class: "btn btn-default" do %>
        <span class="glyphicon glyphicon-refresh"></span>
        <% end %>
      </th>
      <th>name</th>
      <th><%= sort_link @search, :global_id, "global_id" %></th>
      <th><%= sort_link @search, :user_username, "owner" %></th>
      <th><%= sort_link @search, :group_name, "group" %></th>
      <th>updated_at</th>
      <th>created_at</th>
    </tr>
    <tr>
      <th><%= text_field_tag :per_page, (params[:per_page] || RecordProperty.default_per_page), size: 4 %></th>
      <th><%= f.text_field contain_searchable_symbol("name") %></th>
      <th><%= f.text_field :global_id_cont %></th>
      <th><%= f.text_field :user_username_cont %></th>
      <th><%= f.text_field :group_name_cont %></th>
      <th>
        <%= f.text_field gteq_searchable_symbol("updated_at"), class: 'datepicker', placeholder: "from:", value: format_date(params[:q] && params[:q][gteq_searchable_symbol("updated_at")]) %>
      </th>
      <th>
        <%= f.text_field gteq_searchable_symbol("created_at"), class: 'datepicker', placeholder: "from:", value: format_date(params[:q] && params[:q][gteq_searchable_symbol("created_at")]) %>
      </th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th>
        <%= f.text_field lteq_searchable_symbol("updated_at"), class: 'datepicker', placeholder: "to:", value: format_date(params[:q] && params[:q][lteq_searchable_symbol("updated_at")]) %>
      </th>
      <th>
        <%= f.text_field lteq_searchable_symbol("created_at"), class: 'datepicker', placeholder: "to:", value: format_date(params[:q] && params[:q][lteq_searchable_symbol("created_at")]) %>
      </th>
    </tr>
    <% end %>
  </thead>
  <tbody>
    <% @records.each do |record| %>
    <tr>
      <td></td>
      <td><%= link_to record.name, record.datum %></td>
      <td><%= record.global_id %></td>
      <td><%= record.user.try!(:username) %></td>
      <td><%= record.group.try!(:name) %></td>
      <td><%= difference_from_now(record.updated_at) %></td>
      <td><%= difference_from_now(record.created_at) %></td>
    </tr>
    <% end %>
  </tbody>
</table>
